{
 "creation": "2015-02-05 16:32:27.061949", 
 "disabled": 0, 
 "doc_type": "Sales Invoice", 
 "docstatus": 0, 
 "doctype": "Print Format", 
 "html": "<html>\n     <body>\n        <table width=\"100%\" style=\"line-height:0.6;\">\n            <tr style=\"text-align:left;\" style=\"align:center;\"><td width=70%>\n                <img src=\"files/Digi logo.png\" height=\"80%\" width=\"50%\"></img></td>\n                <td width=60% style=\"text-align:right;\"></td>\n            </tr>\n        </table>\n        <table width=100% style=\"cellspacing:0;cellpadding:0;line-height=0.5;\">\n            <tr width=100%>\n                <td width=60%>\n                    <table width=100% style=\"cellspacing:0;cellpadding:0;line-height=0.5;\">\n                        <tr>\n                            <td width=90% ><h5><b>Digital Education Services Pty. Ltd</b></h5></td>\n                            <td width=10% align=\"left\"></td>\n                        </tr>\n                        <tr>\n                            <td width=40%>192 Gladstone Street South Melbourne VIC 3205<br>Tel: 03 9690 5959 Fax: 039690 5922<br>www.digitales.com.au | info@digitales.com.au<br>ABN 49006791457</td>\n                            <td width=60% align=\"left\">{{ \" \" }}\n                            </td>\n                        </tr>\n\n                    </table>\n                </td>\n                <td width=40%>\n                    <table width=100% style=\"cellspacing:0;cellpadding:0;line-height=0.5;\">\n                        <tr>\n                            <td width=40% ><b>Tax Invoice:</b></td>\n                            <td width=60% align=\"left\">{{ doc.name or \"\" }}</td>\n                        </tr>\n                        <tr >\n                            <td width=40%><b>Date:</b></td>\n                            <td width=60% align=\"left\">{{ doc.get_formatted(\"posting_date\",doc) or \"\"}}</td>\n                        </tr>\n                    </table>\n                </td>\n            </tr>\n        </table>\n</br>\n\n        {% set billTo = frappe.db.get_value(\"Address\",doc.customer_address,\"*\") %}\n        {% set shipTo = frappe.db.get_value(\"Address\",doc.shipping_address_name,\"*\") %}\n\n        <div class=\"row\">\n            <div class=\"col-xs-4\">\n                <div class=\"row\">\n                    <div class=\"col-xs-12\"><b>Bill To</b></div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">{{frappe.db.get_value(\"Customer\",doc.customer,\"customer_name\") or ''}}</div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">{{billTo.address_line1 or ''}}{% if billTo.address_line2 -%}<br>{{billTo.address_line2 or ''}},{% endif %}</div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">{{billTo.city or ''}} {{billTo.state or ''}}{% if billTo.pincode -%} - {{billTo.pincode or ''}}{% endif %}</div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">{{billTo.country or ''}}</div>\n                </div>\n            </div>\n            <div class=\"col-xs-4\">\n                <div class=\"row\">\n                    <div class=\"col-xs-12\"><b>Ship To</b></div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">{{frappe.db.get_value(\"Customer\",doc.customer,\"customer_name\") or ''}}</div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">{{shipTo.address_line1 or ''}}{% if shipTo.address_line2 -%}<br>{{shipTo.address_line2 or ''}},{% endif %}</div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">{{shipTo.city or ''}} {{shipTo.state or ''}}{% if shipTo.pincode -%} - {{shipTo.pincode or ''}}{% endif %}</div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-12\">{{shipTo.country or ''}}</div>\n                </div>\n            </div>\n            <div class=\"col-xs-4\">\n                <div class=\"row\">\n                    <div class=\"col-xs-5\" align=\"right\"><b>PO#</b></div>\n                    <div class=\"col-xs-7\">{{doc.po_no or ''}}</div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-5\" align=\"right\"><b>Contract#</b></div>\n                    <div class=\"col-xs-7\">{{doc.contract_number or ''}}</div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-5\" align=\"right\"><b>Budget</b></div>\n                    <div class=\"col-xs-7\">{{doc.budget or ''}}</div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-5\" align=\"right\" style=\"white-space: nowrap;\"><b>Order Type</b></div>\n                    <div class=\"col-xs-7\">{{doc.new_order_type or ''}}</div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-5\" align=\"right\"><b>Terms</b></div>\n                    <div class=\"col-xs-7\">{{doc.terms or ''}}</div>\n                </div>\n            </div>\n        </div>\n\n</br>\n{% set Tax_amt = 0.0 %}\n<div class=\"row\">\n<div class=\"col-xs-12\">\n    <table class=\"table-bordered\" style=\"table-layout:fixed;\">\n         <tr width=100%>\n            <th>Qty<br>Ordered</th>\n            <th>Qty<br>Supplied</th>\n            <th>Item Code</th>\n            <th>Item Name</th>\n            <th>Media</th>\n            <th>RRP</th>\n            <th>Discount</th>\n            <th>Rate</th>\n            <th>Extended<br>Rate</th>\n            <th>GST<br>Value</th>\n            <th>Total<br>Value</th>\n        </tr>\n        {% set totals = {\"extended_rate\":0, \"subtotal\":0,\"gst\":0}%}\n        {%- for row in doc.entries -%}\n        <tr width=100%>\n            <td style=\"width:5%;\" align=\"right\">{{ frappe.db.get_value('Sales Order Item',{'parent':row.sales_order,'item_code':row.item_code},'qty')|int }}</td>\n            <td style=\"width:5%;\" align=\"right\">{{ row.qty|int }}</td>\n            <td style=\"width:25%;\" align=\"left\">{{ row.item_code or \" \" }}</td>\n            <td style=\"width:25%;\" align=\"left\">{{ row.item_name or \" \" }}</td>\n            <td style=\"width:5%;\" align=\"left\">{{ row.item_group or \" \" }}</td>\n            <td style=\"width:5%;\" align=\"right\">{{ \"%.2f\"%(row.price_list_rate) or 0.0}}</td>\n            <td style=\"width:5%;\" align=\"right\">{{ \"%.2f\"%(row.discount_percentage) or 0.0 }} %</td>\n            <td style=\"width:5%;\" align=\"right\">\n             {% set extended_rate = frappe.rounded((row.rate /1.1),2) %}\n             {{ \"%.2f\"%(extended_rate) or 0.0 }}\n            </td>\n            <td style=\"width:5%;\" align=\"right\">\n              {% set extended_value = frappe.rounded((extended_rate * row.qty),2) %}\n             {{ \"%.2f\"%(extended_value) or 0.0}}</td>\n            <td style=\"width:5%;\" align=\"right\">                              \n                {% set gst = frappe.rounded((extended_value * 0.1),3) %}\n                {{ \"%.3f\"%(gst) }}\n            </td>\n                        <td style=\"width:5%;\" align=\"right\">\n                {{ \"%.2f\"%(frappe.rounded((extended_value + gst),2)) or 0.0 }}\n            </td>\n            {% set sub = frappe.rounded((extended_value + totals.get(\"subtotal\")), 2) %}\n            {% set total_gst = frappe.rounded((gst + totals.get(\"gst\")),3) %}\n            {% set t = totals.update({\"subtotal\":sub,\"gst\":total_gst}) %}\n        </tr>\n        {%- endfor -%}\n    </tbody>\n</table>\n</div>\n</div>\n</br>\n<div class=\"row\">\n<div class=\"col-xs-12\" align=\"right\">\n    <table width=40% style=\"cellspacing:0;cellpadding:0;line-height=0.5;\">\n        <tr>\n            {% set taxes_and_charge = {} %}\n            {% set tax = 0.0 %}\n            {% set total_tax = 0.0 %}\n            {%- for row in doc.other_charges -%}\n                {% if row.account_head == '2-4100 GST Net Liability - D' -%}\n                    {% set tax = tax + (row.tax_amount or 0.0)%}\n                    {% set t = taxes_and_charge.update({'GST':tax}) %}\n                {% else %}\n                    {% set t = taxes_and_charge.update({row.description:row.tax_amount}) %}\n                    {% set total_tax = total_tax + row.tax_amount %}\n                    {% set t = taxes_and_charge.update({'total_tax':total_tax}) %}\n                {% endif %}\n\n                {% set included_tax = 0.0 %}\n                {% if row.included_in_print_rate -%}\n                    {% set included_tax = included_tax + (row.tax_amount or 0.0)%}\n                    {% set t = taxes_and_charge.update({'included_tax':included_tax}) %}\n                {% endif %}\n\n                {% if not row.included_in_print_rate and row.account_head == '2-4100 GST Net Liability - D'-%}\n                    {% set tx = totals.get(\"gst\") + row.tax_amount %}\n                    {% set t = totals.update({\"gst\":tx}) %}\n                {% endif %}\n            {%- endfor -%}\n            {% set t = taxes_and_charge.update({'included_tax':totals.get(\"gst\")}) %}\n            {% set total_tax = (taxes_and_charge.get(\"total_tax\") or 0.0) + totals.get(\"gst\") %}\n            {% set t = taxes_and_charge.update({'total_tax':total_tax}) %}\n            <!-- <td width=70% align=\"right\"><b>Subtotal:</b></td>\n            <td width=30% align=\"right\">\n                {{ frappe.db.get_value(\"Currency\", doc.currency, \"symbol\") or \"\" }} {% if doc.net_total_export -%}{{ \"%.2f\"%(doc.net_total_export - (taxes_and_charge.get(\"included_tax\") or 0.0)) or 0.0 }}{% else %}{{ 0.0 }} {% endif %}\n            </td> -->\n            <td width=70% align=\"right\"><b>Subtotal:</b></td>\n            <td width=30% align=\"right\">\n                {{ frappe.db.get_value(\"Currency\", doc.currency, \"symbol\") or \"\" }} {{ \n\"%.2f\"%(totals.get(\"subtotal\")) or 0.0 }}\n            </td>\n        </tr>\n        <!-- {% set total_tax = 0.0 %} -->\n        {%- for label,amt in taxes_and_charge|dictsort -%}\n        {% if label != 'included_tax' and label != 'total_tax' %}\n        <tr>\n            <td width=\"70%\" align=\"right\"><b>{{ label or '' }}</b></td>\n            <td width=30% align=\"right\">\n                <!-- {{ frappe.db.get_value(\"Currency\", doc.currency, \"symbol\") or \"\" }} {{ \"%.2f\"%(amt) or 0.0 }} -->\n                {{ frappe.db.get_value(\"Currency\", doc.currency, \"symbol\") or \"\" }} \n                {% if label == \"GST\" -%}\n                    {{ \"%.2f\"%(totals.get(\"gst\")) or 0.0 }}\n                {% else %}\n                    {{ \"%.2f\"%(amt) or 0.0 }}\n                {% endif %}\n              \n            </td>\n        </tr>\n        {% endif %}\n        {%- endfor -%}\n        <tr>\n           <td width=70% align=\"right\"><b>Total:</b></td>\n           <td width=30% align=\"right\">\n               {{ frappe.db.get_value(\"Currency\", doc.currency, \"symbol\") or \"\" }}\n               {% set total = (frappe.rounded((totals.get('subtotal') + taxes_and_charge.get(\"total_tax\")),2)) %}\n               \n            {{ \n               \"%.2f\"%(total) or 0.0\n            }}\n           </td>\n        </tr>\n        <tr>\n           <td width=70% align=\"right\"><b>Outstanding Amount:</b></td>\n           <td width=30% align=\"right\">\n               {{ frappe.db.get_value(\"Currency\", doc.currency, \"symbol\") or \"\" }}\n            {% set paid = (doc.grand_total_export - doc.outstanding_amount) %}\n            {% if paid < total %}\n                {{ \n                   \"%.2f\"%(total - paid)\n                }}\n            {% else %}\n                {{0.00}}\n            {% endif %}\n           </td>\n        </tr>\n        <tr>\n           <td width=70% align=\"right\"><b>Currency:</b></td>\n           <td width=30% align=\"right\">{{ doc.currency or \" \" }}</td>\n        </tr>\n     <!--   <tr>\n           <td width=70% align=\"right\"><b>Amount Due:</b></td>\n           <td width=30% align=\"right\">\n                {% set paid = frappe.db.sql(\"\"\"select sum(credit) from `tabJournal Voucher Detail` where against_invoice='{0}' and docstatus='1'\"\"\".format(doc.name), as_list=1)%}\n                {% if not paid[0][0] %}\n                    {{ frappe.db.get_value(\"Currency\", doc.currency, \"symbol\") or \"\" }} {{ (totals.get('subtotal') + taxes_and_charge.get(\"total_tax\")) or 0.0 }}\n                {% else %}\n                    {{ frappe.db.get_value(\"Currency\", doc.currency, \"symbol\") or \"\" }} {{(totals.get('subtotal') + taxes_and_charge.get(\"total_tax\") - (paid[0][0]) or 0.0) or 0.0}}\n                {% endif %}\n           </td>\n        </tr> -->\n    </table>\n</div>\n</div>\n</body>\n<footer>\n<p>Please remit to:</p>\n<p>BSB: 063 356</p>\n<p>Account: 1001 2951</p>\n<p>A.B.N 49006791457</p>\n<p>Swift Code: CTBAAU2S</p>\n</footer>\n</html>", 
 "modified": "2016-09-16 15:48:58.011245", 
 "modified_by": "Administrator", 
 "module": "Accounts", 
 "name": "Sales Invoice", 
 "owner": "Administrator", 
 "print_format_type": "Server", 
 "standard": "Yes"
}